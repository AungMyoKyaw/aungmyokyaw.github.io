# Copilot instructions for meta-knowledge (Docusaurus site)

This repository is a personal Docusaurus v3 website (docs + blog) used to publish notes and a portfolio. The instructions below are focused, actionable, and specific to this codebase so an AI agent can be productive immediately.

Key files and where to look

- `docusaurus.config.ts` — site configuration (theme, plugins, mermaid enabled, color mode forced to light).
- `package.json` — common scripts: `npm start` (dev server), `npm run build` (static build), `npm run deploy` (docusaurus deploy). Use `npm ci` for CI installs.
- `.github/workflows/deploy.yml` — GitHub Actions builds with Node 22 and deploys the `build/` folder to GitHub Pages; follow its steps when reproducing CI locally.
- `src/pages` and `src/components` — React/TSX pages and small components; follow Docusaurus theme conventions (`@theme/*`, `@docusaurus/*` hooks).
- `docs/`, `blog/` — content source for docs and blog. Sidebar is generated from `sidebars.ts`.

Developer workflows (explicit)

- Run locally: `npm ci && npm start` — development server at http://localhost:3000 by default.
- Build for production: `npm ci && npm run build` — outputs to `build/`.
- Preview built site: `npm run serve`.
- CI uses Node 22 and `npm ci` (see `.github/workflows/deploy.yml`). Keep packages in `package.json` aligned with Docusaurus v3 versions.

Project-specific conventions and patterns

- TypeScript is used for config and components; `tsconfig.json` extends `@docusaurus/tsconfig` (editor-only). Keep runtime code compatible with React 19 and Docusaurus v3.
- Theme and plugin usage:
  - Official Mermaid theme is enabled (`@docusaurus/theme-mermaid`) and `markdown.mermaid: true` is required for mermaid blocks.
  - Lunr search is added via `docusaurus-lunr-search` and generates static indexes at build time — avoid changing route names that should be indexed.
- Content organization:
  - Docs pages live under `docs/` and use frontmatter; sidebars are autogenerated via `sidebars.ts` (tutorialSidebar -> whole docs folder).
  - Blog posts live under `blog/` with authors and tags YAML in `blog/authors.yml`, `blog/tags.yml`.
- Styling: `src/css/custom.css` + Tailwind-ish utility classes (Docusaurus CSS classes). If adding new components, prefer existing card/grid patterns (see `ProfessionalHighlights`).

Integration points and external dependencies

- GitHub Pages: site deploys via Actions to GitHub Pages — artifacts are the static `build/` directory.
- External fonts and FontAwesome are loaded from CDNs in `docusaurus.config.ts`. When changing these, ensure SRI integrity attributes and crossorigin are correct.
- npm packages pinned to Docusaurus 3.x — avoid upgrading major Docusaurus packages without local build verification.

How to edit content vs. code

- Content edits: modify files in `docs/` or `blog/`. Keep frontmatter keys consistent with existing files.
- UI/behavior edits: change files in `src/pages` or `src/components`, and update `docusaurus.config.ts` only for site-level changes.

Small examples an agent can use

- Add a new doc page: create `docs/notes/new-topic.md` with frontmatter `title:` and optional `id`.
- Add a new React component: `src/components/MyCard/index.tsx` and import it into `src/pages/index.tsx` using Docusaurus theme patterns.
- Fix build errors: run `npm run typecheck` and `npm run lint` to surface common issues.

Testing and verification

- Quick smoke: after changes run `npm ci && npm run build` locally. If build succeeds, run `npm run serve` and spot check routes.
- CI parity: use Node >=18 locally, but Actions use Node 22 — test with Node 22 if possible for parity.

Edits and PR guidance

- Keep changes small and atomic: content-only vs code-only PRs.
- Run `npm run format` and `npm run lint` before opening PRs. Use `prettier` config already present.

Edge cases to watch

- Avoid client-only browser APIs in `docusaurus.config.ts` and other Node-run time config files.
- When editing search plugin or docs routes, remember Lunr index is generated at build time — test `npm run build`.

If you need more context

- Inspect `build/` and `.docusaurus/` for generated artifacts and plugin outputs.
- Check `package-lock.json` for exact dependency versions if a build is failing.
